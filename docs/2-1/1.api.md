> API는 무엇이고 왜 사용할까? 또, API를 문서화 하는 방법은 무엇이 있을까?
> - API란
> - API 명세서란
> - API 명세 도구

## API란
> API란 Application Programming Interface의 약자로, 소프트웨어끼리 어떻게 소통할 것인지 규정한 약속

API를 통해 입력(요청)과 출력(응답)의 형식, 호출 방법을 명확히 정해 두어 서로의 내부 구현을 몰라도 안전하게 연동을 할 수 있다.

### API를 사용하는 이유
- 내부 구현을 숨기고 인터페이스만 공개하여 교체와 확장이 용이하다
- 한 번 만든 기능을 여러 클라이언트(웹, 앱, 다른 서비스 등등)가 공통 규칙으로 재사용 가능
- 허용된 기능만 노출하고 입출력의 검증이 가능하여 보안과 안정성을 챙길 수 있다

API종류는 웹 API, DB API, OS API, 라이브러리/클래스 API 등등 다양하며, Spring Boot는 주로 HTTP 기반의 웹 API(REST)를 정의하고 구현하여 클라이언트와 통신하게 한다.

## API 명세서란

> API 명세서란, 특정 API가 '무엇을', '어떻게' 제공하는지에 대한 스펙을 명시한 문서이다.

클라이언트와 서버가 동일한 규칙을 공유하도록 엔드포인트에 어떻게 요청을 하고 어떤 응답을 받는지, 오류 처리를 어떻게 하는지, 규칙은 무엇인지 등을 기술해야한다.

명세를 명확히 작성해두어야 협업에서도 다른 파트(테스트, 클라이언트 등등)와 병렬로 작업을 진행할 수 있다.

명세서에는 다음과 같은 요소들이 포함되어야 한다.
- 개요 : 목적, 베이스 URL, 용어 정의 등
- 인증/보안 : 토큰 방식, 헤더 규칙, 권한 범위(scope)
- 엔드포인트 : HTTP 메서드(GET/POST...), 경로, 설명
- 파라미터 : path/query/header 별 타입 및 필수 여부 등
- 요청 바디 : JSON 스키마, 예시
- 응답 : 상태 코드(200, 401, 404 ... )별 바디 스미카 예시, 에러 모델(코드/메시지)
- 공통 규칙 : 페이징/정렬/필터 ...


## API 명세 작성 도구
사람이 읽는 문서로는 Notion 등에서 작성되기도 하고, OpenAPI나 gRPC등을 통해 기계도 읽을 수 있도록 스펙을 작성하기도 한다.

HTTP REST API 명세에서는 OpenAPI Swagger가 표준으로 가장 널리 사용된다.

### Spring Boot 연동
스프링부트에서는 springdoc-openapi + Swagger UI를 통해 API 명세를 간단히 작성할 수 있다.

컨트롤러나 DTO에 어노테이션을 붙여 문서를 자동 생성하도록 한다.

- springdoc-openapi + Swagger UI : 실행 중인 애플리케이션에서 OpenAPI 문서를 자동 생성하고, 브라우저 콘솔로 호출까지 가능
- Spring REST Docs: 테스트가 통과해야 문서가 생성되는 검증 기반 정적 문서
- REST Docs -> OpenAPI 내보내기(restdocs-api-spec): REST Docs 테스트에서 OpenAPI 3 스펙 파일(yaml/json)까지 산출

#### springdoc-oepnapi + Swagger UI
개발 단계에서 즉시 사용 가능한 UI를 제공할 수 있기 때문에 내부용으로 빠르게 문서활르 하고 시연하는 등 변화가 잦은 상황에 사용하기 적합한 방법이다.

주요 엔드포인트는 다음과 같다
- /v3/api-docs
- /swagger-ui/index.html

컨트롤러 메서드에 `@Operation(summary, description)` , `@Parameter` , `@ApiResponse` , `@Schema` , `@Tag`, `@Hidden` 등을 사용할 수 있다.

`@NotNull`, `@Size` 등의 Validation을 자동 반영한다.

설정이 간단하며 빠른 피드백이 가능한 것이 장점이지만 실행코드가 곧 문서화가 되는 것이기 때문에 항상 실제 응답과 같은 내용을 담지는 못한다. (ex. 런타임에서 분기 처리 되는 경우 문서와 실제 응답이 다를 수 있음)


예시 코드
```Java
@Operation(summary="주문 조회")

@ApiResponses({@ApiResponse(responseCode="200", description="성공"),
@ApiResponse(responseCode="404", description="없음")})
```

